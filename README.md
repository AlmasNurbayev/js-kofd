# js-kofd
Данный бот разработан с целью мониторинга продаж для владельцев сети магазинов Cipo.
Сервис задумывался как пет-проект в упрощенном виде, но теперь стал основным инструментом мониторинга для владельца.

## Выводится информация:
 - о продажах/возвратах по кассам за заданный период времени, используются предустановленные периоды. Источник данных - ОФД Jusan Mobile.  
 - чек конкретной продажи, изображение товара, подгружается из бекэнда (сайта)[https://cipo.kz]
 - диаграммы - сравнение продаж по периодам (дням или месяцам)
 - состоянии смен в текущий день
 - служебные данные - лог-файл, файл ошибок в усеченном или полном виде, лог запросов.
            
## Используемый стек:
 - node.js с модулями - axios (get и post запросы к ОФД jusan Mobile), telegraf (интерфейс бота), pg (Postgres), moment (даты), pino (логи), chart-js (диаграммы)
 - через Github Actions на сервере (self-hosted) вызывается pull файлов проекта и рестарт PM2
 - был успешно опробован deploy и запуск в контейнере Docker, но с целью экономии диска пока оставлен стандартный пуск на хосте VPS, так как там всего 2 проекта с похожими требованиями
 - управление через PM2
 - (репозиторий)[https://github.com/AlmasNurbayev/js-kofd]

## Скриншоты:
- Основные команды - они по периодам выводят либо текст, либо диаграммы
<image src="/public_images/bot_commands.png" alt="Основные команды - они по периодам выводят либо текст, либо диаграммы">
- Главная статистика
<image src="/public_images/bot_stat.png" alt="главная статистика">
- Загрузка чека и изображения товара (нужен бэкенд сайта)
<image src="/public_images/bot_check.png" alt="Загрузка чека и изображения товара (нужен бэкенд сайта)">
- Диаграмма
<image src="/public_images/bot_chart.png" alt="Диаграмма">
- Также можно через бот выводить логи, частично или полностью файл
<image src="/public_images/bot_admin_command.png" alt="Также можно через бот выводить логи, частично или полностью файл">


